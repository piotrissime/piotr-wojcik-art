---
import Layout from "../layouts/Layout.astro";
import GalleryComponent from "../components/GalleryComponent";
import { optimizeImages } from "../utils/imageOptimization";
import { Header } from "../components/Header";
const pathname = new URL(Astro.request.url).pathname;
const currentPath = pathname.slice(1); // remove the first "/"

const images = await Astro.glob("./galleryItems/*.md");
const optimizedImages = await optimizeImages(images);
---

<Layout title="Galerie | Piotr Wojcik">
  <Header client:load currentPath={currentPath} />
  <main>
    <div class="max-w-3xl mx-auto text-center space-y-4 mb-16 animate-fade-in">
      <h1 class="text-5xl font-serif font-bold text-foreground">Galerie</h1>
      <p class="text-lg text-muted-foreground">
        Découvrez mes peintures : animaux, scènes rurales et créations inspirées.
      </p>
    </div>

    <GalleryComponent images={optimizedImages} client:load />
  </main>
  <div class="scroll-to-top">
    <img src="/assets/icons/chevron-up.svg" alt="Retour en haut de page" />
  </div>
</Layout>

<script src="../scripts/gallery.js"></script>

<style>
  main {
    padding: 0 16px;
  }
 

  .scroll-to-top {
    position: fixed;
    right: 2rem;
    background-color: white;
    border-radius: 5px;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    pointer-events: none;
    transition: all 0.4s;
    opacity: 0;
    bottom: 0rem;
    box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
  }
  .scroll-to-top_active {
    opacity: 1;
    pointer-events: auto;
    bottom: 2rem;
  }
  .scroll-to-top_active:hover {
    opacity: 0.8;
  }
  .scroll-to-top_active:active {
    transform: scale(0.9);
  }
  .scroll-to-top img {
    pointer-events: none;
  }
</style>
