---
import Layout from "../layouts/Layout.astro";
import GalleryComponent from "../components/GalleryComponent";
import { optimizeImages } from "../utils/imageOptimization";
import { Header } from "../components/Header";
const pathname = new URL(Astro.request.url).pathname;
const currentPath = pathname.slice(1); // remove the first "/"

const images = await Astro.glob("./galleryItems/*.md");
const optimizedImages = await optimizeImages(images);
---

<Layout title="Galerie | Piotr Wojcik">
  <Header client:load currentPath={currentPath} />
  <main>
    <div class="max-w-3xl mx-auto text-center space-y-4 mb-16 animate-fade-in">
      <h1 class="text-5xl font-serif font-bold text-foreground">Galerie</h1>
      <p class="text-lg text-muted-foreground">
        Découvrez mes peintures : animaux, scènes rurales et créations inspirées.
      </p>
    </div>

    <div class="filter-options">
      <input
        class="filter-options__all filter-button filter-active"
        type="button"
        value="Tous"
      />
      <input
        class="filter-options__black-white filter-button"
        type="button"
        value="Peintures noir et blanc"
      />
      <input
        class="filter-options__colour filter-button"
        type="button"
        value="Peintures couleur"
      />
      <input
        class="filter-options__drawings filter-button"
        type="button"
        value="Dessins"
      />
    </div>
    <GalleryComponent images={optimizedImages} client:load />
  </main>
  <div class="scroll-to-top">
    <img src="/assets/icons/chevron-up.svg" alt="Retour en haut de page" />
  </div>
</Layout>

<script src="../scripts/gallery.js"></script>

<style>
  main {
    padding: 0 16px;
  }
  .filter-options {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 25px;
    margin-top: 40px;
  }

  .filter-button {
    border: 1px solid black;
    background: transparent;
    color: black;
    padding: 4px 12px;
    border-radius: 6px;
    font-size: 1.4rem;
    font-family: "Playfair Display", serif;
  }
  .filter-button:hover {
    cursor: pointer;
    opacity: 0.5;
  }

  .scroll-to-top {
    position: fixed;
    right: 2rem;
    background-color: rgb(216, 220, 221);
    border-radius: 5px;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    pointer-events: none;
    transition: all 0.4s;
    opacity: 0;
    bottom: 0rem;
  }
  .scroll-to-top_active {
    opacity: 1;
    pointer-events: auto;
    bottom: 2rem;
  }
  .scroll-to-top_active:hover {
    opacity: 0.8;
  }
  .scroll-to-top_active:active {
    transform: scale(0.9);
  }
  .scroll-to-top img {
    pointer-events: none;
  }

  /* Filter options */

  .filter-active {
    background: #292620;
    color: white;
  }

  .filter-button.filter-active:hover {
    opacity: initial;
  }
</style>
